(program
  (name "test-sum-divisors-42")
  (doc "Calculate sum of divisors of a number.")
  (version "0.1")

  (type ExitCode
    (alias Int32)
  )

  (fn sum-divisors
    (doc "Calculate sum of proper divisors (excluding n itself).")
    (params (n Int32))
    (returns Int32)
    (body
      (do
        (let sum Int32 0)
        (let i Int32 1)
        (while (< i n)
          (do
            (let quotient Int32 (/ n i))
            (let product Int32 (* quotient i))
            (if-stmt (== product n)
              (set sum (+ sum i))
              (do 0)
            )
            (set i (+ i 1))
          )
        )
        (return sum)
      )
    )
  )

  (entry main
    (doc "Sum of divisors of 30 is 1+2+3+5+6+10+15 = 42.")
    (params ())
    (returns ExitCode)
    (body (sum-divisors 30))
  )
)
