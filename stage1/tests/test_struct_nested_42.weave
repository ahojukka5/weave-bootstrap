(program
  (name "test-struct-nested-42")
  (doc "Test multiple struct instances.")
  (version "0.1")

  (type ExitCode
    (alias Int32)
  )

  (struct Point
    (fields Int32 Int32)
  )

  (entry main
    (doc "Create two points and compute sum.")
    (params ())
    (returns ExitCode)
    (body
      (do
        (let pt1 (ptr (struct Point)) (make (struct Point) 10 20))
        (let pt2 (ptr (struct Point)) (make (struct Point) 5 7))
        (let x1 Int32 (get-field pt1 f0))
        (let y1 Int32 (get-field pt1 f1))
        (let x2 Int32 (get-field pt2 f0))
        (let y2 Int32 (get-field pt2 f1))
        ;; 10 + 20 + 5 + 7 = 42
        (return (+ (+ (+ x1 y1) x2) y2))
      )
    )
  )
)
