(program
  (name "test-swap-42")
  (doc "Swap two variables using temporary and pointers.")
  (version "0.1")

  (type ExitCode
    (alias Int32)
  )

  (fn swap
    (doc "Swap values at two pointers.")
    (params (a (ptr Int32)) (b (ptr Int32)))
    (returns Int32)
    (body
      (do
        (let temp Int32 (load Int32 a))
        (store Int32 (load Int32 b) a)
        (store Int32 temp b)
        (return 0)
      )
    )
  )

  (entry main
    (doc "Swap 10 and 42, then return second value.")
    (params ())
    (returns ExitCode)
    (body
      (do
        (let x Int32 10)
        (let y Int32 42)
        (swap (addr x) (addr y))
        ;; Now x = 42, y = 10
        (return x)
      )
    )
  )
)
