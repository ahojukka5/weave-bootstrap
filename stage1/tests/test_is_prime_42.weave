(program
  (name "test-is-prime-42")
  (doc "Check if a number is prime.")
  (version "0.1")

  (type ExitCode
    (alias Int32)
  )

  (fn is-prime
    (doc "Return 1 if n is prime, 0 otherwise.")
    (params (n Int32))
    (returns Int32)
    (body
      (do
        (if-stmt (< n 2)
          (return 0)
          (do 0)
        )
        (let i Int32 2)
        (while (< i n)
          (do
            (let quotient Int32 (/ n i))
            (let product Int32 (* quotient i))
            (if-stmt (== product n)
              (return 0)
              (do 0)
            )
            (set i (+ i 1))
          )
        )
        (return 1)
      )
    )
  )

  (entry main
    (doc "Count primes less than 20: [2,3,5,7,11,13,17,19] = 8, then 8 * 5 + 2 = 42.")
    (params ())
    (returns ExitCode)
    (body
      (do
        (let count Int32 0)
        (let i Int32 2)
        (while (< i 20)
          (do
            (if-stmt (!= (is-prime i) 0)
              (set count (+ count 1))
              (do 0)
            )
            (set i (+ i 1))
          )
        )
        (return (+ (* count 5) 2))
      )
    )
  )
)
